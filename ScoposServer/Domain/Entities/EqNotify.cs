// ============================================================================
// СУЩНОСТЬ (ENTITY) - МОДЕЛЬ ДАННЫХ ДЛЯ ТАБЛИЦЫ УВЕДОМЛЕНИЙ
// ============================================================================

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace ScoposServer.Domain.Entities;

/// <summary>
/// Модель данных для таблицы EqNotify.
/// Содержит информацию об уведомлениях, дефектах, предписаниях по оборудованию.
/// Маппится на таблицу "EqNotify" в базе данных PostgreSQL.
/// </summary>
[Table("EqNotify")] // Явное указание имени таблицы в БД (CamelCase сохранен)
public class EqNotify
{
    // ========================================================================
    // 1. КЛЮЧИ И ИДЕНТИФИКАТОРЫ (PRIMARY & FOREIGN KEYS)
    // ========================================================================

    /// <summary>
    /// ПЕРВИЧНЫЙ КЛЮЧ - Уникальный код уведомления
    /// </summary>
    /// <remarks>
    /// [KEY] - атрибут первичного ключа.
    /// Формат: NOT-XXX-ГГГГ, где XXX - порядковый номер, ГГГГ - год.
    /// Пример: "NOT-001-2024", "NOT-016-2024"
    /// Обязательное поле, строковый тип.
    /// </remarks>
    [Key]
    public string QmCode { get; set; } = null!;

    /// <summary>
    /// ВНЕШНИЙ КЛЮЧ - Код функционального элемента (ФЭ)
    /// </summary>
    /// <remarks>
    /// Ссылка на справочник функциональных элементов.
    /// Пример: "FE-COMP-01", "FE-PUMP-01", "FE-VESSEL-01"
    /// Обязательное поле.
    /// </remarks>
    public string FeCode { get; set; } = null!;

    /// <summary>
    /// ВНЕШНИЙ КЛЮЧ - Код оборудования
    /// </summary>
    /// <remarks>
    /// Ссылка на таблицу EqEquipment (Code).
    /// Связь "один ко многим": одно оборудование - много уведомлений.
    /// Пример: "EQ001", "EQ002"
    /// Обязательное поле.
    /// </remarks>
    public string EoCode { get; set; } = null!;

    // ========================================================================
    // 2. ТИПОЛОГИЯ УВЕДОМЛЕНИЯ (КЛАССИФИКАЦИЯ)
    // ========================================================================

    /// <summary>
    /// Тип уведомления
    /// </summary>
    /// <remarks>
    /// Верхнеуровневая категоризация.
    /// Возможные значения: "Техническое", "Промышленная безопасность", "Предписание"
    /// </remarks>
    public string? QmType { get; set; }

    /// <summary>
    /// Код группы уведомления
    /// </summary>
    /// <remarks>
    /// Группировка по типу дефекта/неисправности.
    /// Пример: "GRP-VIB" (вибрация), "GRP-LEAK" (утечки), "GRP-TEMP" (температура)
    /// </remarks>
    public string? QmGrpCode { get; set; }

    /// <summary>
    /// Наименование группы уведомления
    /// </summary>
    /// <remarks>
    /// Человекочитаемое название группы.
    /// Пример: "Вибрация", "Утечки", "Температура", "Давление"
    /// </remarks>
    public string? QmGrpName { get; set; }

    /// <summary>
    /// Код дефекта (детальный код)
    /// </summary>
    /// <remarks>
    /// Конкретный код неисправности внутри группы.
    /// Пример: "COD-VIB-H" (превышение вибрации), "COD-LEAK-T" (утечка теплоносителя)
    /// </remarks>
    public string? QmCodCode { get; set; }

    /// <summary>
    /// Наименование дефекта
    /// </summary>
    /// <remarks>
    /// Полное описание неисправности/дефекта.
    /// Пример: "Превышение вибрации", "Течь уплотнения", "Превышение давления"
    /// </remarks>
    public string? QmCodName { get; set; }

    // ========================================================================
    // 3. ОРГАНИЗАЦИЯ-ИНИЦИАТОР
    // ========================================================================

    /// <summary>
    /// Организация, выдавшая предписание/уведомление
    /// </summary>
    /// <remarks>
    /// Контролирующий орган или внутренняя служба.
    /// Пример: "Ростехнадзор", "ООО Технадзор", "АО Энергоаудит", "ООО Диагностика"
    /// </remarks>
    public string? Organization { get; set; }

    // ========================================================================
    // 4. ДЕТАЛИ ФУНКЦИОНАЛЬНОГО ЭЛЕМЕНТА (ФЭ)
    // ========================================================================

    /// <summary>
    /// Код группы функционального элемента
    /// </summary>
    /// <remarks>
    /// Группировка оборудования по функциональному назначению.
    /// Пример: "GRP-COMP" (компрессоры), "GRP-PUMP" (насосы)
    /// </remarks>
    public string? FeGrpCode { get; set; }

    /// <summary>
    /// Наименование группы функционального элемента
    /// </summary>
    /// <remarks>
    /// Человекочитаемое название группы.
    /// Пример: "Компрессорное оборудование", "Насосное оборудование"
    /// </remarks>
    public string? FeGrpName { get; set; }

    /// <summary>
    /// Код функционального элемента (детальный)
    /// </summary>
    /// <remarks>
    /// Конкретный тип оборудования внутри группы.
    /// Пример: "COD-COMP-01" (компрессор центробежный), "COD-PUMP-01" (насос центробежный)
    /// </remarks>
    public string? FeCodCode { get; set; }

    /// <summary>
    /// Наименование функционального элемента (детальное)
    /// </summary>
    /// <remarks>
    /// Тип оборудования человекочитаемо.
    /// Пример: "Компрессор центробежный", "Насос центробежный", "Емкость"
    /// </remarks>
    public string? FeCodName { get; set; }

    /// <summary>
    /// Наименование функционального элемента (конкретное)
    /// </summary>
    /// <remarks>
    /// Конкретное имя узла/агрегата по месту установки.
    /// Пример: "Компрессор Н-101", "Насос П-201", "Емкость Е-401"
    /// </remarks>
    public string? FeName { get; set; }

    // ========================================================================
    // 5. СТАТУСЫ И КРИТИЧНОСТЬ
    // ========================================================================

    /// <summary>
    /// Уровень критичности дефекта
    /// </summary>
    /// <remarks>
    /// Оценка опасности/важности.
    /// Иерархия: "Критический" → "Высокий" → "Средний" → "Низкий"
    /// Используется для приоритизации работ.
    /// </remarks>
    public string? Criticality { get; set; }

    /// <summary>
    /// Статус устранения дефекта
    /// </summary>
    /// <remarks>
    /// Текущее состояние работ по устранению.
    /// Возможные значения: "В работе", "Устранен", "Просрочен", "Контроль"
    /// </remarks>
    public string? EliminationStatus { get; set; }

    /// <summary>
    /// Дата устранения дефекта
    /// </summary>
    /// <remarks>
    /// Плановая или фактическая дата завершения работ.
    /// NULL - если дефект не устранен или срок не установлен.
    /// </remarks>
    public DateTime? EliminationDate { get; set; }

    /// <summary>
    /// Статус ремонтных работ
    /// </summary>
    /// <remarks>
    /// Тип и статус ремонта.
    /// Пример: "Плановый ремонт", "Текущий ремонт", "Капитальный ремонт", "Завершен"
    /// </remarks>
    public string? RepairStatus { get; set; }

    // ========================================================================
    // 6. ДОКУМЕНТАЦИЯ
    // ========================================================================

    /// <summary>
    /// Номер приказа/распоряжения/предписания
    /// </summary>
    /// <remarks>
    /// ВНИМАНИЕ: Поле названо "Order", но это зарезервированное слово в SQL/C#.
    /// Рекомендуется переименовать в "OrderInfo" или "OrderNumber".
    /// Пример: "ПР-124-24", "ПР-139-24"
    /// </remarks>
    public string? Order { get; set; }

}