<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ GLB —Ñ–∞–π–ª–∞</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				padding: 20px;
				background: #1a1a1a;
				color: white;
			}
			.container {
				max-width: 800px;
				margin: 0 auto;
			}
			.test-result {
				padding: 15px;
				margin: 10px 0;
				border-radius: 5px;
				background: #2d2d2d;
			}
			.success {
				border-left: 4px solid #4caf50;
			}
			.error {
				border-left: 4px solid #f44336;
			}
			.loading {
				border-left: 4px solid #ff9800;
			}
			code {
				background: #000;
				padding: 2px 6px;
				border-radius: 3px;
				font-family: monospace;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<h1>üîç –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ GLB —Ñ–∞–π–ª–∞</h1>

			<div id="results">
				<div class="test-result loading">
					<h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...</h3>
					<p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–∞ KS-17_optimized.glb</p>
				</div>
			</div>

			<div id="direct-links" style="margin-top: 20px; display: none">
				<h3>–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª:</h3>
				<ul id="link-list"></ul>
			</div>
		</div>

		<script>
			const modelName = 'KS-17_optimized.glb'
			const pathsToTest = [
				`/models/${modelName}`,
				`/public/models/${modelName}`,
				`./models/${modelName}`,
				`/${modelName}`,
				`/public/${modelName}`,
			]

			const resultsDiv = document.getElementById('results')
			const directLinksDiv = document.getElementById('direct-links')
			const linkList = document.getElementById('link-list')

			async function testPath(path) {
				try {
					const response = await fetch(path)
					const resultDiv = document.createElement('div')

					if (response.ok) {
						resultDiv.className = 'test-result success'
						resultDiv.innerHTML = `
                        <h3>‚úÖ –§–∞–π–ª –Ω–∞–π–¥–µ–Ω!</h3>
                        <p>–ü—É—Ç—å: <code>${path}</code></p>
                        <p>–°—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}</p>
                        <p>–†–∞–∑–º–µ—Ä: ${
													response.headers.get('content-length') || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
												} –±–∞–π—Ç</p>
                    `

						// –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É
						const listItem = document.createElement('li')
						listItem.innerHTML = `<a href="${path}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å ${path}</a>`
						linkList.appendChild(listItem)
						directLinksDiv.style.display = 'block'
					} else {
						resultDiv.className = 'test-result error'
						resultDiv.innerHTML = `
                        <h3>‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω</h3>
                        <p>–ü—É—Ç—å: <code>${path}</code></p>
                        <p>–°—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}</p>
                    `
					}

					resultsDiv.appendChild(resultDiv)
				} catch (error) {
					const resultDiv = document.createElement('div')
					resultDiv.className = 'test-result error'
					resultDiv.innerHTML = `
                    <h3>‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ</h3>
                    <p>–ü—É—Ç—å: <code>${path}</code></p>
                    <p>–û—à–∏–±–∫–∞: ${error.message}</p>
                `
					resultsDiv.appendChild(resultDiv)
				}
			}

			async function runAllTests() {
				// –£–±–∏—Ä–∞–µ–º loading —Å–æ–æ–±—â–µ–Ω–∏–µ
				resultsDiv.innerHTML = ''

				for (const path of pathsToTest) {
					await testPath(path)
				}

				// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É public —á–µ—Ä–µ–∑ fetch
				try {
					const publicResponse = await fetch('/')
					const publicResult = document.createElement('div')
					publicResult.className = 'test-result loading'
					publicResult.innerHTML = `
                    <h3>üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏</h3>
                    <p>–ö–æ—Ä–Ω–µ–≤–æ–π URL –¥–æ—Å—Ç—É–ø–µ–Ω: ${
											publicResponse.ok ? '‚úÖ' : '‚ùå'
										}</p>
                `
					resultsDiv.appendChild(publicResult)
				} catch (error) {
					console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä–Ω—è:', error)
				}
			}

			// –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
			runAllTests()
		</script>
	</body>
</html>
